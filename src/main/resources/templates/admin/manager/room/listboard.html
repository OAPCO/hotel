<!DOCTYPE html>
<html data-bs-theme="light" lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/main}">
<head>
    <title>룸 관리</title>
    <link rel="stylesheet" href="/yhh.css">
</head>

<body>
<div layout:fragment="content">
    <h4 class="card-title">[[${storeDTO.storeName}]] 관리</h4>
    <div class="card">


        <div class="card-body">
            <div style="color:#44454e; font-size: 25px; margin-bottom: 10px">
                객실 목록
            </div>

            <script>
                function changeCardType(roomIdx2, roomName2, roomCd2, roomType2, roomStatus2) {

                    var card = document.getElementById(roomCd2);


                    if(card) {
                        console.log(roomCd2);

                        card.removeAttribute('onclick');
                        card.className = 'card room-card';

                        card.addEventListener('click', function () {
                            window.location.href = '/admin/manager/room/' + roomIdx2;
                        });


                        var roomType = null;
                        switch (roomType2){
                            case "NORMAL" : roomType = "일반실"; break;
                            case "SPECIAL" : roomType = "특실"; break;
                            case "PARTYROOM" : roomType = "파티룸"; break;
                        }

                        console.log(roomStatus2);

                        var roomStatus = null;
                        switch (roomStatus2){
                            case 0 : roomStatus = "[빈 방]"; break;
                            case 1 : roomStatus = "[예약됨]"; break;
                            case 2 : roomStatus = "[사용중]"; break;
                        }

                        var roomNameSpan = document.createElement("span");
                        roomNameSpan.textContent = roomName2;
                        roomNameSpan.style.fontSize = "24px"; // 크기 조정
                        roomNameSpan.style.fontStyle.bold();
                        card.appendChild(roomNameSpan);
                        card.appendChild(document.createTextNode(roomType));
                        card.appendChild(document.createElement("br"));
                        card.appendChild(document.createTextNode(roomStatus));

                    }


                }
            </script>


            <div class="row">

                <div class="col-custom-12" th:each="index : ${#numbers.sequence(49,60)}">
                    <div class="card room-empty" th:id="'roomCard' + ${index}" th:attr="data-index=${index}" onclick="roomRegister(this)"></div>

                    <div th:each="data: ${list}">
                        <div th:if="${data.roomCd.contains('roomCard' + index)}" class="col-custom-12">
                            <script th:inline="javascript">

                                var roomStatus2 = [[${data.roomStatus}]];
                                var roomType2 = [[${data.roomType}]];
                                var roomCd2 = [[${data.roomCd}]];
                                var roomName2 = [[${data.roomName}]];
                                var roomIdx2 = [[${data.roomIdx}]];

                                changeCardType(roomIdx2,roomName2,roomCd2, roomType2, roomStatus2);

                            </script>
                        </div>
                    </div>

                </div>

                <div class="col-custom-12" th:each="index : ${#numbers.sequence(37,48)}">
                    <div class="card room-empty" th:id="'roomCard' + ${index}" th:attr="data-index=${index}" onclick="roomRegister(this)"></div>

                    <div th:each="data: ${list}">
                        <div th:if="${data.roomCd.contains('roomCard' + index)}" class="col-custom-12">
                            <script th:inline="javascript">

                                var roomStatus2 = [[${data.roomStatus}]];
                                var roomType2 = [[${data.roomType}]];
                                var roomCd2 = [[${data.roomCd}]];
                                var roomName2 = [[${data.roomName}]];
                                var roomIdx2 = [[${data.roomIdx}]];

                                changeCardType(roomIdx2,roomName2,roomCd2, roomType2, roomStatus2);

                            </script>
                        </div>
                    </div>

                </div>

                <div class="col-custom-12" th:each="index : ${#numbers.sequence(25,36)}">
                    <div class="card room-empty" th:id="'roomCard' + ${index}" th:attr="data-index=${index}" onclick="roomRegister(this)"></div>

                    <div th:each="data: ${list}">
                        <div th:if="${data.roomCd.contains('roomCard' + index)}" class="col-custom-12">
                            <script th:inline="javascript">

                                var roomStatus2 = [[${data.roomStatus}]];
                                var roomType2 = [[${data.roomType}]];
                                var roomCd2 = [[${data.roomCd}]];
                                var roomName2 = [[${data.roomName}]];
                                var roomIdx2 = [[${data.roomIdx}]];

                                changeCardType(roomIdx2,roomName2,roomCd2, roomType2, roomStatus2);

                            </script>
                        </div>
                    </div>

                </div>

                <div class="col-custom-12" th:each="index : ${#numbers.sequence(13,24)}">
                    <div class="card room-empty" th:id="'roomCard' + ${index}" th:attr="data-index=${index}" onclick="roomRegister(this)"></div>

                    <div th:each="data: ${list}">
                        <div th:if="${data.roomCd.contains('roomCard' + index)}" class="col-custom-12">
                            <script th:inline="javascript">

                                var roomStatus2 = [[${data.roomStatus}]];
                                var roomType2 = [[${data.roomType}]];
                                var roomCd2 = [[${data.roomCd}]];
                                var roomName2 = [[${data.roomName}]];
                                var roomIdx2 = [[${data.roomIdx}]];

                                changeCardType(roomIdx2,roomName2,roomCd2, roomType2, roomStatus2);

                            </script>
                        </div>
                    </div>

                </div>

                <div class="col-custom-12" th:each="index : ${#numbers.sequence(1,12)}">

                    <div class="card room-empty" th:id="'roomCard' + ${index}" th:attr="data-index=${index}" onclick="roomRegister(this)"></div>

                    <div th:each="data: ${list}">
                        <div th:if="${data.roomCd.contains('roomCard' + index)}" class="col-custom-12">
                            <script th:inline="javascript">

                                var roomStatus2 = [[${data.roomStatus}]];
                                var roomType2 = [[${data.roomType}]];
                                var roomCd2 = [[${data.roomCd}]];
                                var roomName2 = [[${data.roomName}]];
                                var roomIdx2 = [[${data.roomIdx}]];

                                changeCardType(roomIdx2,roomName2,roomCd2, roomType2, roomStatus2);

                            </script>
                        </div>
                    </div>

                </div>

            </div>


            <div class="card-body">
                <div style="color:#44454e; font-size: 25px; margin-bottom: 10px">
                    예약 요청 현황
                </div>
                <div class="table-responsive">
                    <table class="table body">
                        <thead>
                        <tr>
                            <th>No</th>
                            <th>룸 구분</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="orderList:${roomOrderList}">
                            <td th:text="${orderList.roomorderIdx}"></td>
                        </tr>

                        </tbody>
                    </table>
                </div>

            </div>



    </div>
</div>


    <script th:inline="javascript">



        function roomRegister(element) {


            //버튼이 속한 카드의 ID를 변수에 넣음
            var cardId = element.id;
            console.log('객실 등록 버튼을 누른 카드의 ID:', cardId);

            //객실 추가 팝업창 생성
            var popupUrl = "/window/roomregister?id=" + cardId;
            var popupOption = "width=1500, height=500";
            window.open(popupUrl, "객실 추가", popupOption);
        }



        function changeCard(roomIdx, roomName, roomCd, roomType, roomStatus) {
            var card = document.getElementById(roomCd);

            if (card) {
                card.removeAttribute('onclick');
                card.className = 'card room-card';

                card.addEventListener('click', function () {
                    window.location.href = '/admin/manager/room/' + roomIdx;
                });

                var roomTypeText = null;
                switch (roomType) {
                    case "NORMAL":
                        roomTypeText = "일반실";
                        break;
                    case "SPECIAL":
                        roomTypeText = "특실";
                        break;
                    case "PARTYROOM":
                        roomTypeText = "파티룸";
                        break;
                }

                var roomStatusText = null;
                switch (roomStatus) {
                    case 0:
                        roomStatusText = "[빈 방]";
                        break;
                    case 1:
                        roomStatusText = "[예약됨]";
                        break;
                    case 2:
                        roomStatusText = "[사용중]";
                        break;
                }

                var roomNameSpan = document.createElement("span");
                roomNameSpan.textContent = roomName;
                roomNameSpan.style.fontSize = "24px"; // 크기 조정
                card.appendChild(roomNameSpan);
                card.appendChild(document.createTextNode(roomTypeText));
                card.appendChild(document.createElement("br"));
                card.appendChild(document.createTextNode(roomStatusText));
            }
        }


    </script>


    <script th:inline="javascript">
        var processMessage = null;
        if (processMessage) {
            alert(processMessage);
        }
    </script>



</div>
</body>
</html>