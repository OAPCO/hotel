<!DOCTYPE html>
<html data-bs-theme="light" lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/membermain}">
<head>
    <meta charset="UTF-8">
    <title>메인</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/3.0.7/fullpage.css">

    <style>
        #id1 input{
            margin-bottom: 5px;
        }
        .hidden {
            display: none; /* 숨김 상태 */
        }
        .text_box {
            font-size: 3rem;
            text-align: center;
            color: white;
            font-weight: bold;
            padding-top: 200px; /* margin-top 대신 padding-top을 사용 */
        }
        .text_box1 {
            font-size: 3rem;
            text-align: center;
            color: white;
            font-weight: bold;

        }
        .text1{
            font-size: 3rem;
            text-align: center;
            color: white;
            font-weight: bold;
        }
        .blink {
            animation: blink 0.5s infinite;
            font-size: 3.5rem;
            color: white;
        }

        @keyframes blink {
            to {
                opacity: 0;
            }
        }
        #section0{
            background-image: url(https://cdn.pixabay.com/photo/2016/01/09/18/27/journey-1130732_1280.jpg);
            background-size: cover;
            background-position: center;
        }
        #section1{
            background-color: white;
            background-size: cover;
            background-position: center;
        }
        #section2{
            background-image: url(https://cdn.pixabay.com/photo/2018/03/07/18/42/menu-3206749_1280.jpg);
            background-size: cover;
            background-position: center;
        }
        #section3{
            background-image: url(https://cdn.pixabay.com/photo/2024/02/26/14/13/computer-8598079_1280.jpg);
            background-size: cover;
            background-position: center;
        }

        /* search-container를 flex로 설정하고 요소들을 중앙에 정렬합니다. */
        .search-container {
            padding-top: 25px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;  /* 추가로 요소들 사이의 간격을 조정했습니다. */
        }

        /* .search-inputs와 .search-box를 flex로 설정하고 요소들을 가로로 정렬합니다. 이들의 너비는 상위 컨테이너인 search-container의 50%입니다. */
        .search-inputs, .search-box {
            display: flex;
            width: 50%;
            justify-content: space-between;
            gap: 0;  /* 요소들 사이의 간격을 없애기 위해 0으로 설정합니다. */
            align-items: center; /* 이 코드를 추가하여 요소들이 동일한 기준선에 정렬되게 합니다. */

            /* 각 input, select, button 요소의 높이를 50px로 설정하고, 모서리를 각진 형태로 만듭니다. */
            select, input[type="date"], .form-control, .btn {
                height: 50px;
                border-radius: 0;
                border: none; /* 추가하면 브라우저 기본 스타일을 제거하여 높이를 정확히 조정할 수 있습니다. */
                box-sizing: border-box; /* 이건 전체 너비를 정확하게 계산합니다(패딩과 경계 포함). */
            }
        }

        /* .search-box 내의 input 요소와 button 요소에 flex 속성을 추가해 일관된 너비를 유지합니다. */
        .search-box .form-control {
            flex: 8;
        }

        .search-box .btn{
            flex: 2;
            height: 50px;
            margin-top: 1px;
        }
        #id1 input{
            height: 60px;

        }
    </style>

</head>
<body>
<div layout:fragment="content">
    <div id="fullpage">
        <div class="section" id="section0">
            <div class="text_box">
                <span id="fixedText" style="margin-bottom: 20px;">호텔져스와 함께 어디든<br></span>
                <span id="rotateText" class="text"></span><span class="blink">|</span>
            </div>
            <div class="search-container">

                <div class="search-inputs">
                    <input type="date" placeholder="Start Date">
                    <input type="date" placeholder="End Date">
                </div>

                <div class="search-box" id="id1" >
                    <form th:action="@{/member/memberpage/index}" method="post" style="display: flex;">
                        <input type="text" class="form-control" aria-label="Recipient's username"
                               aria-describedby="button-addon2" name="keyword" style="flex: 8; position: relative; top: -9px;">
                        <button class="btn btn-primary" type="submit" id="button-addon2" style="flex: 2;margin-top: 1px; ">검색</button>
                    </form>
                </div>
            </div>
        </div>
        <div class="section" id="section1">
            <div class="container" style="margin: auto; width: 80%;">
                <!-- 메뉴카테고리 -->
                <div class="card shadow">
                    <div class="card-header py-3">
                        <div class="sub_title">
                            <h2>검색결과 </h2>
                        </div>
                    </div>
                    <div class="card-body">
                        <div id="categories" class="btn-group" role="group" aria-label="Basic example">
                            <button type="button" class="btn btn-outline-dark" onclick="changeDetails(1)">핫딜</button>
                            <button type="button" class="btn btn-outline-dark" onclick="changeDetails(2)">평점순</button>
                            <button type="button" class="btn btn-outline-dark" onclick="changeDetails(3)">낮은
                                가격순</button>
                        </div>

                    </div>
                    <!-- 상세 메뉴 그룹 -->
                    <div id="details" class="card-deck p-3">
                        <!-- 메뉴가 여기에 추가될 것입니다. -->
                    </div>
                </div>
            </div>

        </div>
        <div class="section" id="section2">
            <div class="text_box1" style="display: flex; justify-content: space-around; height: 100vh;">
                <div style="flex: 1; display: flex; flex-direction: column; justify-content: center; padding-left: 75px;">
                    <span id="fixedText1" style="margin-top: calc(50px - 6rem);" class="headline">당신의 휴식을 위한 최상의
                        선택,<br></span>
                    <span id="fixedText2" style="margin-top: calc(100px - 6rem);" class="headline">룸 서비스로 특별한 순간을 만나보세요<br></span>
                    <div style="display: flex; justify-content: center;">
                        <button class="btn btn-primary" style="margin-top: 50px; width: 50%;">주문하기</button>
                    </div>
                </div>
                <div style="flex: 1; display: flex; flex-direction: column; justify-content: center;">
                    <span id="rotateText1" class="text" style="margin-left: -3rem; margin-top: -6rem; padding-right: 60px; padding-bottom: 50px;"><span class="blink">|</span></span>
                </div>
            </div>
        </div>
        <div class="section" id="section3">
            <div style="display: flex; align-items: center; height: 100vh; padding-left: 10%;">
            <div>
                <span class="text1" style="text-align: left;">"질문 있으세요? 우리가 답변해 드릴게요."</span>
                <div style="margin-top: 20px;">
                    <button class="btn btn-primary" type="button" th:onclick="|location.href='@{/member/memberpage/qnacenter}'|">고객센터 가기</button>
                </div>
            </div>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/3.0.7/fullpage.js"></script>
    <script>
        var myfullpage = new fullpage('#fullpage', {
            verticalCentered: false,
            autoScrolling: true,
            scrollHorizontally: true,
        });

        const rotateContent = ["서울으로", "부산으로", "제주로", "양양으로", "여수로"];
        let text = document.getElementById("rotateText");
        let j = 0;

        function typeRotateText() {
            if (j < rotateContent.length) {
                let individualRotateContent = rotateContent[j];
                text.textContent = individualRotateContent;
                setTimeout(typeRotateText, 3000);
                j++;
            } else {
                j = 0;
                typeRotateText();
            }
        }

        const rotateContent1 = ["한식", "양식", "일식", "중식", "분식", "치킨"];
        const fixedContent1 = ["당신의 휴식을 위한 최상의 선택,", "룸 서비스로 특별한 순간을 만나보세요"];
        let text1 = document.getElementById("rotateText1");
        let text2 = document.getElementById("fixedText1");
        let text3 = document.getElementById("fixedText2");
        let k = 0, l = 0;

        function typeRotateText1() {
            if (k < rotateContent1.length) {
                let individualRotateContent = rotateContent1[k];
                text1.textContent = individualRotateContent;
                setTimeout(typeRotateText1, 3000);
                k++;
            } else {
                k = 0;
                typeRotateText1();
            }
        }

        function typeFixedText() {
            if(l < fixedContent1.length) {
                if(l === 0) {
                    text2.textContent = fixedContent1[l];
                } else if(l === 1) {
                    text3.textContent = fixedContent1[l];
                }
                l++;
                setTimeout(typeFixedText, 3000);
            } else {
                text2.textContent = fixedContent1[0];
                text3.textContent = fixedContent1[1];
                l = 0;
                setTimeout(typeFixedText, 3000);
            }
        }

        let observer = new IntersectionObserver(function(entries, observer) {
            entries.forEach(entry => {
                if(entry.isIntersecting) {
                    typeRotateText1();
                    observer.unobserve(entry.target);
                }
            });
        }, {});

        let section = document.querySelector('.text_box');
        observer.observe(section);

        typeFixedText();
        typeRotateText1();
        typeRotateText();

        // 검색 버튼 클릭 시 section2로 스크롤되면서 해당 섹션과 검색 결과가 함께 나타나도록 구현
        document.getElementById('button-addon2').addEventListener('click', function() {
            myfullpage.moveTo(1);
            document.getElementById('section1').classList.remove('fp-destroyed');
        });

        var menuCateList = [
            {
                menuCateIdx: 1,
                detailMenuDTOList: [
                    {
                        name: '메뉴 1-1',
                        image: 'https://via.placeholder.com/150',
                        price: '$10'
                    },
                    {
                        name: '메뉴 1-2',
                        image: 'https://via.placeholder.com/150',
                        price: '$20'
                    },
                    {
                        name: '메뉴 1-3',
                        image: 'https://via.placeholder.com/150',
                        price: '$30'
                    },
                ],
            },
            {
                menuCateIdx: 2,
                detailMenuDTOList: [
                    {
                        name: '메뉴 2-1',
                        image: 'https://via.placeholder.com/150',
                        price: '$10'
                    },
                    {
                        name: '메뉴 2-2',
                        image: 'https://via.placeholder.com/150',
                        price: '$20'
                    },
                    {
                        name: '메뉴 2-3',
                        image: 'https://via.placeholder.com/150',
                        price: '$30'
                    },
                ],
            },
            {
                menuCateIdx: 3,
                detailMenuDTOList: [
                    {
                        name: '메뉴 3-1',
                        image: 'https://via.placeholder.com/150',
                        price: '$10'
                    },
                    {
                        name: '메뉴 3-2',
                        image: 'https://via.placeholder.com/150',
                        price: '$20'
                    },
                    {
                        name: '메뉴 3-3',
                        image: 'https://via.placeholder.com/150',
                        price: '$30'
                    },
                ]
            }
        ];

        function changeDetails(categoryIdx) {
            var selectedCate = menuCateList.find(function(m) {
                return m.menuCateIdx == categoryIdx;
            });

            var detailGroup = document.getElementById('details');
            detailGroup.innerHTML = '';

            selectedCate.detailMenuDTOList.forEach(function(menu) {
                var divRow = document.createElement('div');
                divRow.className = 'row mb-3';

                var div = document.createElement('div');
                div.className = 'card col-12';

                var divCardBody = document.createElement('div');
                divCardBody.className = 'card-body row';

                var divImgCol = document.createElement('div');
                divImgCol.className = 'col-2';

                var imgFood = document.createElement('img');
                imgFood.src = menu.image;
                imgFood.alt = 'food_image';
                imgFood.className = 'card-img-top';
                imgFood.style.height = '100px';

                divImgCol.appendChild(imgFood);

                var divDescCol = document.createElement('div');
                divDescCol.className = 'col-10';

                var h5 = document.createElement('h5');
                h5.textContent = menu.name;
                h5.className = 'card-title';

                var p = document.createElement('p');
                p.textContent = menu.price;
                p.className = 'card-text';

                divDescCol.appendChild(h5);
                divDescCol.appendChild(p);

                divCardBody.appendChild(divImgCol);
                divCardBody.appendChild(divDescCol);
                div.appendChild(divCardBody);
                divRow.appendChild(div);

                detailGroup.appendChild(divRow);
            });
        }

        // Set initial display
        document.addEventListener("DOMContentLoaded", function(event) {
            changeDetails(1);
        });

    </script>

    <script src="/assets2/bootstrap/js/bootstrap.min.js?h=b4349cf7232e6b66621e089f2b9beee5"></script>
    <script src="/assets2/js/script.min.js?h=9a9b12d9479055b6ccf322643488f6dd"></script>
</div>
</body>
</html>
